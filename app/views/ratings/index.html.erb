<h1>Ratings Overview</h1>

<div class="row">
  <div class="col-xs-6 col-sm-4"><h2>Top Beers</h2>
    <%= render 'list', toplist: @top_beers %></div>
  <div class="col-xs-6 col-sm-4"><h2>Top Breweries</h2>
    <%= render 'list', toplist: @top_breweries %></div>
  <div class="col-xs-6 col-sm-4"><h2>Top Styles</h2>
    <%= render 'list', toplist: @top_styles %></div>
</div>

<div class="row">
  <div class="col-xs-8 col-sm-12">
    <h2>Most Active Users</h2>
    <table class="table table-hover">
      <thead>
      <tr>
        <th> Name</th>
        <th> Ratings Given</th>
        <th> Favorite Beer</th>
        <th> Favorite Style</th>
      </tr>
      </thead>

      <tbody>
      <% @top_users.each do |user| %>
          <tr>
            <td><%= link_to user.username, user %></td>
            <td><%= user.ratings.count %></td>
            <td><%= link_to user.favorite_beer.name, user.favorite_beer %></td>
            <td><%= link_to user.favorite_style.name, user.favorite_style %></td>
          </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="col-xs-8 col-sm-12">
    <h2>Recent ratings</h2>
    <ul>
      <% @ratings.each do |rating| %>
          <li><%= link_to rating, rating.beer %> by <%= link_to rating.user.username, rating.user %></li>
      <% end %>
    </ul>

    <p>
      <%= link_to 'Add new rating', new_rating_path, class: "btn btn-primary" if current_user %>
    </p>
  </div>
</div>